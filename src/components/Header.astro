---
---

<header id="g-navigation">
    <div class="header-container">
        <div class="logo">
            <a href="/" class="logo-text">Studentský Velehrad</a>
        </div>
        <nav class="main-nav">
            <ul>
                <li><a href="/tym">Tým</a></li>
                <li><a href="https://sv24.studentskyvelehrad.cz/sv24" target="_blank" rel="noopener noreferrer">Minulý ročník</a></li>
            </ul>
        </nav>
    </div>
</header>

<button class="hamburger" id="hamburger" aria-label="Otevřít menu">
    <span></span>
    <span></span>
    <span></span>
</button>

<div class="mobile-overlay" id="mobileOverlay"></div>

<div class="mobile-menu" id="mobileMenu">
    <button class="hamburger-close" id="hamburger-close" aria-label="Zavřít menu">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <ul>
        <li><a href="/">Studentský Velehrad</a></li>
        <li><a href="/tym">Tým</a></li>
        <li><a href="https://sv24.studentskyvelehrad.cz/sv24" target="_blank" rel="noopener noreferrer">Minulý ročník</a></li>
    </ul>
</div>

<script>
    function initMobileMenu() {
        const hamburger = document.getElementById('hamburger');
        const hamburgerClose = document.getElementById('hamburger-close');
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileOverlay = document.getElementById('mobileOverlay');
        const mobileLinks = mobileMenu?.querySelectorAll('a');

        if (!hamburger || !hamburgerClose || !mobileMenu || !mobileOverlay) {
            return;
        }

        function toggleMenu(e?: Event) {
            if (e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            hamburger.classList.toggle('open');
            mobileMenu.classList.toggle('open');
            mobileOverlay.classList.toggle('open');
            
            if (mobileMenu.classList.contains('open')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        const newHamburger = hamburger.cloneNode(true) as HTMLElement;
        const newHamburgerClose = hamburgerClose.cloneNode(true) as HTMLElement;
        const newMobileOverlay = mobileOverlay.cloneNode(true) as HTMLElement;
        
        hamburger.parentNode?.replaceChild(newHamburger, hamburger);
        hamburgerClose.parentNode?.replaceChild(newHamburgerClose, hamburgerClose);
        mobileOverlay.parentNode?.replaceChild(newMobileOverlay, mobileOverlay);

        newHamburger.addEventListener('click', toggleMenu);
        newHamburgerClose.addEventListener('click', toggleMenu);
        newMobileOverlay.addEventListener('click', toggleMenu);

        mobileLinks?.forEach(link => {
            link.addEventListener('click', () => {
                const menu = document.getElementById('mobileMenu');
                if (menu?.classList.contains('open')) {
                    toggleMenu();
                }
            });
        });
    }

    initMobileMenu();
    document.addEventListener('astro:after-swap', initMobileMenu);
</script>
